<!DOCTYPE html>
<html>
<head>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jsforce/1.9.1/jsforce.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"/>

</head>
<body class="container">
  <h3>Oauth2 Connection</h3>
  <label for="clientId">ClientId:</label>
  <input type="text" class="form-control"  value='3MVG9riCAn8HHkYWKZMrSG6ge.fBzihzKx0ueO.sNWTzVJt_LrIErHvRFu5hPiPGwqXt36ZpmgpxSZoDYZ4kQ' required name="clientId" id="clientId">

  <label for="callback">Callback URL</label>
  <input type="text" value="https://mohan-chinnappan-n5.github.io/2022/dpa/oauth2/callback" class="form-control" required name="callback" id="callback">


  <hr/>
  <button id="login" class="btn btn-info">Login</button>


  <script>
   

    const loginBtn = document.getElementById('login');
    const clientIdEle = document.getElementById('clientId');
    const callbackEle = document.getElementById('callback');

    loginBtn.addEventListener('click', event => {
      const clientId = clientIdEle.value;
      const redirectUri = callbackEle.value;
      const proxyUrl = 'https://mohansun-sfproxy.herokuapp.com/proxy/';


      jsforce.browser.init({
        clientId,
        redirectUri,
        proxyUrl

      });
      /* jsforce.browser.on('connect', function(conn) {
        conn.query('SELECT Id, Name FROM Account', function(err, res) {
          if (err) { return console.error(err); }
          console.log(res);
        });
      });
      */

      jsforce.browser.login();

    })


    
    // https://login.salesforce.com/services/oauth2/authorize?response_type=token&client_id=3MVG9riCAn8HHkYWKZMrSG6ge.fBzihzKx0ueO.sNWTzVJt_LrIErHvRFu5hPiPGwqXt36ZpmgpxSZoDYZ4kQ&redirect_uri=https%3A%2F%2Fmohan-chinnappan-n5.github.io%2F2022%2Fdpa%2Foauth2%2Fcallback&scope=&state=jsforce0.popup.63qcvp4uu55
    // https://mohan-chinnappan-n5.github.io/2022/dpa/oauth2/callback/#access_token=00D8c000003TgUT%21AR4AQL02tm9nBlDnFopnaMx7F25b9QPKh_UhDBD1wHolRCRXoYVSdYRN6ps.InopuJ.vD37qwDZdvF95F75B6ox52xXbIdyl&instance_url=https%3A%2F%2Fd8c000003tgutea0-dev-ed.my.salesforce.com&id=https%3A%2F%2Flogin.salesforce.com%2Fid%2F00D8c000003TgUTEA0%2F0058c0000093MbZAAU&issued_at=1644327915360&signature=DimunxY%2Bxz6ThS0ND119Nio6zSb7sEmQAqxx0g45Vd4%3D&state=jsforce0.popup.c03kvakct4m&scope=api&token_type=Bearer 
    </script>


</body>
</html>
