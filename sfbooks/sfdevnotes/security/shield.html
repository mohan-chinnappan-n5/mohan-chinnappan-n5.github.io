<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Shield - Salesforce Development Notes</title>


        <!-- Custom HTML head -->

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../custom.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../dg/dg.html"><strong aria-hidden="true">2.</strong> Data Governance</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../dg/changeManagement.html"><strong aria-hidden="true">2.1.</strong> Change Management</a></li></ol></li><li class="chapter-item expanded "><a href="../dm/datamodel.html"><strong aria-hidden="true">3.</strong> Data Model</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../dm/fsc-dm.html"><strong aria-hidden="true">3.1.</strong> Financial Services Cloud</a></li><li class="chapter-item expanded "><a href="../dm/salescloud.html"><strong aria-hidden="true">3.2.</strong> Sales Cloud</a></li></ol></li><li class="chapter-item expanded "><a href="../tools/aboutTools.html"><strong aria-hidden="true">4.</strong> Tools</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tools/tools-org.html"><strong aria-hidden="true">4.1.</strong> Org Tools</a></li><li class="chapter-item expanded "><a href="../tools/tools-data-bulkapi2.html"><strong aria-hidden="true">4.2.</strong> Data Loading BulkAPI2</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tools/userloading.html"><strong aria-hidden="true">4.2.1.</strong> User Loading</a></li><li class="chapter-item expanded "><a href="../tools/product2loading.html"><strong aria-hidden="true">4.2.2.</strong> Product2 Loading and Update</a></li><li class="chapter-item expanded "><a href="../tools/flowinterview.html"><strong aria-hidden="true">4.2.3.</strong> FlowInterview Query and Deletion</a></li></ol></li><li class="chapter-item expanded "><a href="../tools/tools-scpl.html"><strong aria-hidden="true">4.3.</strong> Loading State and Country Picklist</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tools/tools-scpl-update.html"><strong aria-hidden="true">4.3.1.</strong> Updating State and Country Picklist </a></li></ol></li><li class="chapter-item expanded "><a href="../tools/project-management/gantt.html"><strong aria-hidden="true">4.4.</strong> Project Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../project-management/pert.html"><strong aria-hidden="true">4.4.1.</strong> PERT</a></li></ol></li><li class="chapter-item expanded "><a href="../tools/em.html"><strong aria-hidden="true">4.5.</strong> Event Monitoring</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../monitoring/realtime-event-monitoring.html"><strong aria-hidden="true">4.5.1.</strong> Real-Time Event Monitoring</a></li></ol></li><li class="chapter-item expanded "><a href="../tools/instance.html"><strong aria-hidden="true">4.6.</strong> Instance Related</a></li><li class="chapter-item expanded "><a href="../tools/oms.html"><strong aria-hidden="true">4.7.</strong> Org Metadata Snapshot</a></li></ol></li><li class="chapter-item expanded "><a href="../tools/scripts.html"><strong aria-hidden="true">5.</strong> Auditing Scripts</a></li><li class="chapter-item expanded "><a href="../custom-metadata-types.html"><strong aria-hidden="true">6.</strong> Custom Metadata Types</a></li><li class="chapter-item expanded "><a href="../cq/cq.html"><strong aria-hidden="true">7.</strong> Code Quality</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../cq/pmd.html"><strong aria-hidden="true">7.1.</strong> Code Scan PMD</a></li><li class="chapter-item expanded "><a href="../cq/comments.html"><strong aria-hidden="true">7.2.</strong> Comments Checking</a></li><li class="chapter-item expanded "><a href="../cq/test-coverage.html"><strong aria-hidden="true">7.3.</strong> Apex Code Test Coverage</a></li><li class="chapter-item expanded "><a href="../cq/lwc-linting.html"><strong aria-hidden="true">7.4.</strong> LWC Linting</a></li></ol></li><li class="chapter-item expanded "><a href="../deployments/deployments.html"><strong aria-hidden="true">8.</strong> Deployments</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../deployments/delta.html"><strong aria-hidden="true">8.1.</strong> Delta Deployments</a></li><li class="chapter-item expanded "><a href="../deployments/gha.html"><strong aria-hidden="true">8.2.</strong> Github Actions</a></li><li class="chapter-item expanded "><a href="../deployments/validate.html"><strong aria-hidden="true">8.3.</strong> Validating changes</a></li><li class="chapter-item expanded "><a href="../deployments/admin-changes.html"><strong aria-hidden="true">8.4.</strong> Taking care of Admin changes</a></li><li class="chapter-item expanded "><a href="../deployments/devOpsCenter.html"><strong aria-hidden="true">8.5.</strong> DevOps Center</a></li><li class="chapter-item expanded "><a href="../deployments/jenkins.html"><strong aria-hidden="true">8.6.</strong> Jenkins</a></li><li class="chapter-item expanded "><a href="../deployments/git.html"><strong aria-hidden="true">8.7.</strong> git</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../deployments/git-internals.html"><strong aria-hidden="true">8.7.1.</strong> git internals</a></li><li class="chapter-item expanded "><a href="../deployments/git-hooks.html"><strong aria-hidden="true">8.7.2.</strong> git hooks</a></li><li class="chapter-item expanded "><a href="../deployments/git-ops.html"><strong aria-hidden="true">8.7.3.</strong> git operations</a></li><li class="chapter-item expanded "><a href="../deployments/pr-template.html"><strong aria-hidden="true">8.7.4.</strong> pull request template</a></li><li class="chapter-item expanded "><a href="../deployments/git-diff.html"><strong aria-hidden="true">8.7.5.</strong> git diff</a></li><li class="chapter-item expanded "><a href="../deployments/git-log.html"><strong aria-hidden="true">8.7.6.</strong> git log</a></li><li class="chapter-item expanded "><a href="../deployments/git-stash.html"><strong aria-hidden="true">8.7.7.</strong> git stash</a></li><li class="chapter-item expanded "><a href="../deployments/git-config.html"><strong aria-hidden="true">8.7.8.</strong> git config</a></li></ol></li><li class="chapter-item expanded "><a href="../deployments/sourceTracking.html"><strong aria-hidden="true">8.8.</strong> Source Tracking</a></li><li class="chapter-item expanded "><a href="../deployments/dangling.html"><strong aria-hidden="true">8.9.</strong> Dangling Fields Finder</a></li><li class="chapter-item expanded "><a href="../deployments/sbx.html"><strong aria-hidden="true">8.10.</strong> Sandbox Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../deployments/sandbox-preview-guide.html"><strong aria-hidden="true">8.10.1.</strong> Sandbox Preview Guide</a></li></ol></li><li class="chapter-item expanded "><a href="../deployments/MetadataComponentDependency.html"><strong aria-hidden="true">8.11.</strong> MetadataComponentDependency</a></li><li class="chapter-item expanded "><a href="../deployments/yaml.html"><strong aria-hidden="true">8.12.</strong> YAML</a></li><li class="chapter-item expanded "><a href="../deployments/packages.html"><strong aria-hidden="true">8.13.</strong> Installed Packages</a></li></ol></li><li class="chapter-item expanded "><a href="../crma/tools.html"><strong aria-hidden="true">9.</strong> CRMA tools</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../crma/load-export.html"><strong aria-hidden="true">9.1.</strong> Dataset Load and Export</a></li><li class="chapter-item expanded "><a href="../crma/analysis.html"><strong aria-hidden="true">9.2.</strong> Analysis</a></li><li class="chapter-item expanded "><a href="../crma/binding.html"><strong aria-hidden="true">9.3.</strong> Binding</a></li><li class="chapter-item expanded "><a href="../crma/deployment.html"><strong aria-hidden="true">9.4.</strong> Deployment</a></li></ol></li><li class="chapter-item expanded "><a href="../perf/perf.html"><strong aria-hidden="true">10.</strong> Performance</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../perf/lex-perf.html"><strong aria-hidden="true">10.1.</strong> Lex Performance</a></li><li class="chapter-item expanded "><a href="../perf/perf-testing.html"><strong aria-hidden="true">10.2.</strong> Performance testing</a></li><li class="chapter-item expanded "><a href="../perf/perf-pw.html"><strong aria-hidden="true">10.3.</strong> Testing with Playwright</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../e2e/playwright.html"><strong aria-hidden="true">10.3.1.</strong> More with Playwright</a></li></ol></li><li class="chapter-item expanded "><a href="../perf/edge.html"><strong aria-hidden="true">10.4.</strong> Salesforce Edge Network</a></li><li class="chapter-item expanded "><a href="../perf/lex-query.html"><strong aria-hidden="true">10.5.</strong> Lightning Experience Queries</a></li><li class="chapter-item expanded "><a href="../perf/rum.html"><strong aria-hidden="true">10.6.</strong> Real User Monitoring (RUM)</a></li></ol></li><li class="chapter-item expanded "><a href="../dwg/dwg-tools.html"><strong aria-hidden="true">11.</strong> Diagram tools</a></li><li class="chapter-item expanded "><a href="../xml/xml-tools.html"><strong aria-hidden="true">12.</strong> XML tools</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../xml/xlst-transformer.html"><strong aria-hidden="true">12.1.</strong> Transformer</a></li><li class="chapter-item expanded "><a href="../xml/xml-delta.html"><strong aria-hidden="true">12.2.</strong> XML Delta Util</a></li></ol></li><li class="chapter-item expanded "><a href="../dp/dp.html"><strong aria-hidden="true">13.</strong> Data Processing tools</a></li><li class="chapter-item expanded "><a href="../i18n/i18n.html"><strong aria-hidden="true">14.</strong> Translation Tools</a></li><li class="chapter-item expanded "><a href="../media/recording.html"><strong aria-hidden="true">15.</strong> Media - Recording tools</a></li><li class="chapter-item expanded "><a href="../media/image.html"><strong aria-hidden="true">16.</strong> Image Processing</a></li><li class="chapter-item expanded "><a href="../codegen/codegen.html"><strong aria-hidden="true">17.</strong> Code Generators</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../codegen/lwc.html"><strong aria-hidden="true">17.1.</strong> LWC Code Generators</a></li></ol></li><li class="chapter-item expanded "><a href="../ml/ml.html"><strong aria-hidden="true">18.</strong> Machine Learning</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ml/sdcg.html"><strong aria-hidden="true">18.1.</strong> Semantic Doc Compare and Group</a></li><li class="chapter-item expanded "><a href="../ml/datacatalog.html"><strong aria-hidden="true">18.2.</strong> Data Catalog for ML Work</a></li><li class="chapter-item expanded "><a href="../ml/chatgpt.html"><strong aria-hidden="true">18.3.</strong> openAI - ChatGPT</a></li><li class="chapter-item expanded "><a href="../ml/gpt3codex.html"><strong aria-hidden="true">18.4.</strong> openAI - GPT3 Codex</a></li><li class="chapter-item expanded "><a href="../ml/einsteinbot.html"><strong aria-hidden="true">18.5.</strong> Einstein Bot</a></li><li class="chapter-item expanded "><a href="../ml/dialogflow.html"><strong aria-hidden="true">18.6.</strong> Dialogflow - Knowledge Base</a></li></ol></li><li class="chapter-item expanded "><a href="../docmgmt/docmgmt.html"><strong aria-hidden="true">19.</strong> Document Management tools</a></li><li class="chapter-item expanded "><a href="../design/design-notes.html"><strong aria-hidden="true">20.</strong> Design Principles</a></li><li class="chapter-item expanded "><a href="../chromeext/ext.html"><strong aria-hidden="true">21.</strong> Chrome Extensions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chromeext/onnu.html"><strong aria-hidden="true">21.1.</strong> ONNU</a></li></ol></li><li class="chapter-item expanded "><a href="../vscode/ext.html"><strong aria-hidden="true">22.</strong> VS Code Extensions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../vscode/sfland.html"><strong aria-hidden="true">22.1.</strong> SF Land</a></li><li class="chapter-item expanded "><a href="../vscode/pmd.html"><strong aria-hidden="true">22.2.</strong> VSCode Apex PMD</a></li></ol></li><li class="chapter-item expanded "><a href="../dviz/dviz.html"><strong aria-hidden="true">23.</strong> Data Viz</a></li><li class="chapter-item expanded "><a href="../releases.html"><strong aria-hidden="true">24.</strong> Releases</a></li><li class="chapter-item expanded "><a href="../rest/rest_tester.html"><strong aria-hidden="true">25.</strong> REST Tester</a></li><li class="chapter-item expanded "><a href="../security/security.html"><strong aria-hidden="true">26.</strong> Security</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../security/sd.html"><strong aria-hidden="true">26.1.</strong> Sharing Debugger</a></li><li class="chapter-item expanded "><a href="../security/rh.html"><strong aria-hidden="true">26.2.</strong> Role Hierarchy</a></li><li class="chapter-item expanded "><a href="../security/shield.html" class="active"><strong aria-hidden="true">26.3.</strong> Shield</a></li><li class="chapter-item expanded "><a href="../security/profile-ps.html"><strong aria-hidden="true">26.4.</strong> Profile, PermissionSet</a></li><li class="chapter-item expanded "><a href="../security/setupAuditTrail.html"><strong aria-hidden="true">26.5.</strong> SetupAuditTrail</a></li><li class="chapter-item expanded "><a href="../security/datamask.html"><strong aria-hidden="true">26.6.</strong> Data Mask</a></li><li class="chapter-item expanded "><a href="../security/saml.html"><strong aria-hidden="true">26.7.</strong> SAML</a></li><li class="chapter-item expanded "><a href="../security/openIDConnectConcepts.html"><strong aria-hidden="true">26.8.</strong> OpenID Connect</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../security/openIDConnect.html"><strong aria-hidden="true">26.8.1.</strong> OIDC Google</a></li><li class="chapter-item expanded "><a href="../security/openIDConnectProvider.html"><strong aria-hidden="true">26.8.2.</strong> OIDC Provider</a></li><li class="chapter-item expanded "><a href="../security/jwt.html"><strong aria-hidden="true">26.8.3.</strong> JWT</a></li></ol></li><li class="chapter-item expanded "><a href="../security/openssl.html"><strong aria-hidden="true">26.9.</strong> OpenSSL</a></li></ol></li><li class="chapter-item expanded "><a href="../mobile/mobile.html"><strong aria-hidden="true">27.</strong> Mobile</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../mobile/ios-sim.html"><strong aria-hidden="true">27.1.</strong> Simulator</a></li></ol></li><li class="chapter-item expanded "><a href="../rd/rd.html"><strong aria-hidden="true">28.</strong> Reports and Dashboards</a></li><li class="chapter-item expanded "><a href="../customLabels/cl.html"><strong aria-hidden="true">29.</strong> Custom Labels</a></li><li class="chapter-item expanded "><a href="../accessibility/508.html"><strong aria-hidden="true">30.</strong> 508 - Accessibility</a></li><li class="chapter-item expanded "><a href="../process-automation/pa.html"><strong aria-hidden="true">31.</strong> Process Automation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../process-automation/flow.html"><strong aria-hidden="true">31.1.</strong> Flow</a></li></ol></li><li class="chapter-item expanded "><a href="../great/folks.html"><strong aria-hidden="true">32.</strong> Great Folks</a></li><li class="chapter-item expanded "><a href="../editor/editor-tips.html"><strong aria-hidden="true">33.</strong> Editor tips</a></li><li class="chapter-item expanded "><a href="../bash/tips.html"><strong aria-hidden="true">34.</strong> Bash tips</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Salesforce Development Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="shield"><a class="header" href="#shield">Shield</a></h1>
<h2 id="topics"><a class="header" href="#topics">Topics</a></h2>
<ul>
<li><a href="#bp">Best Practices</a></li>
<li><a href="#km">Key Management</a></li>
<li><a href="#setup">Shield Setup</a></li>
<li><a href="#faq">FAQ</a></li>
</ul>
<hr />
<p><a name='bp'></a></p>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<ul>
<li>Take the time to identify the most likely threats to your org
<ul>
<li>
<p>Distinguish data that needs encryption from data that doesn’t, so that you can <strong>encrypt only what you need 
to</strong>. Not all data is sensitive.</p>
</li>
<li>
<p>Focus on information that requires encryption to meet your regulatory, security, compliance, and privacy requirements. Unnecessarily encrypting data impacts functionality and performance.</p>
</li>
<li>
<p>Balance <strong>business-critical functionality</strong> against <strong>security and risk measures</strong> and challenge your assumptions periodically.</p>
</li>
<li>
<p>Your tenant secret and keys are backed up, and be careful <strong>who you allow to manage your secrets and keys</strong>.</p>
<ul>
<li>If your tenant secrets are destroyed, reimport them to access your data. You are <strong>solely responsible for making sure that your data and tenant secrets are backed up and stored in a safe place</strong>. Salesforce cannot help you with deleted, destroyed, or misplaced tenant secrets.</li>
</ul>
</li>
<li>
<p>To identify the <strong>threats that are most likely to affect your organization</strong>,</p>
<ul>
<li>Walk through a formal threat modeling exercise. </li>
<li>Use your findings to create a data classification scheme, which can help you decide what data to encrypt.</li>
</ul>
</li>
<li>
<p>Test Shield Platform Encryption in a <strong>sandbox environment before deploying to a production environment</strong>. Encryption policy settings can be deployed using change sets.</p>
</li>
<li>
<p>Before enabling encryption, fix any violations that you uncover.</p>
<ul>
<li>For example, if you <strong>reference encrypted fields</strong> in a SOQL ORDER BY clause, <strong>a violation occurs</strong>. Fix the violation by removing references to the encrypted fields.</li>
</ul>
</li>
<li>
<p>If you use <strong>an app from the AppExchange</strong>, test how it interacts with encrypted data in your organization and evaluate whether its functionality is affected.</p>
<ul>
<li>If you suspect Shield Platform Encryption could affect the <strong>functionality of an app</strong>, ask the provider for help with evaluation.</li>
</ul>
</li>
<li>
<p>Grant the <strong>Manage Encryption Keys</strong> user permission to authorized users only.</p>
<ul>
<li>Users with the Manage Encryption Keys permission can generate, export, import, and destroy organization-specific keys. Monitor the key management activities of these users regularly with the <strong>setup audit trail</strong>.</li>
</ul>
</li>
<li>
<p>Synchronize your existing data with your active key material.</p>
<ul>
<li><strong>Existing field and file data is not automatically encrypted</strong> when you turn on Shield Platform Encryption. </li>
<li>To <strong>encrypt existing field data</strong>, update the records associated with the field data. 
<ul>
<li>This action triggers encryption for these records so that your existing data is encrypted at rest. </li>
<li><strong>To encrypt existing files or get help updating other encrypted data, contact Salesforce</strong>.</li>
<li>We can encrypt existing file data in the background to ensure data alignment with the latest encryption policy and key material
<ul>
<li>When you contact Salesforce support to request the background encryption service, <strong>allow at least a week</strong> before you need the background encryption completed. </li>
<li>The time to complete the process varies based on the volume of data involved. <strong>It could take several days</strong>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Currency and Number fields can’t be encrypted</strong> because they could have broad functional consequences across the platform, such as disruptions to roll-up summary reports, report timeframes, and calculations.</p>
</li>
<li>
<p>You can often keep private, sensitive, or regulated data of this variety safe in other encryption-supported field types.</p>
</li>
<li>
<p>Before you enable Shield Platform Encryption in a production environment, <strong>communicate to the users</strong> about how it affects your business solution.</p>
</li>
<li>
<p>When you <strong>generate a new tenant secret</strong>, any new data is encrypted using this key.</p>
<ul>
<li>However, existing sensitive data <strong>remains encrypted using previous keys</strong>. </li>
<li>In this situation, Salesforce strongly <strong>recommends re-encrypting these fields using the latest key</strong>. Contact Salesforce for help with re-encrypting your data.</li>
</ul>
</li>
<li>
<p>Use discretion when granting <strong>login as access to users</strong> or Salesforce Customer Support.</p>
<ul>
<li>If you grant <em>login access to a user</em>, and they have <strong>field level security access to an encrypted field</strong>, that user is <strong>able to view encrypted data in that field in plaintext</strong>.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a name='km'></a></p>
<h2 id="key-management-and-rotation"><a class="header" href="#key-management-and-rotation">Key Management and Rotation</a></h2>
<ul>
<li>Shield Platform Encryption lets you control and rotate the key material used to encrypt your data</li>
<li>You can use Salesforce to <strong>generate a tenant secret for you</strong>
<ul>
<li>This is then combined with a <strong>per-release master secret</strong> to derive a <strong>data encryption key</strong>.</li>
</ul>
<pre><code>  tenant_secret + per_release_master_secret =&gt; data_encryption_key 
</code></pre>
<ul>
<li>This <strong>derived data encryption key</strong> is used in encrypt and decrypt functions</li>
</ul>
</li>
<li>You can also use the <strong>Bring Your Own Key (BYOK) service</strong> to upload your own key material</li>
<li>Or store key material outside of Salesforce and have the Cache-Only Key Service fetch <strong>your key material on demand</strong>.</li>
</ul>
<hr />
<p><a name='setup'></a></p>
<h2 id="shield-setup"><a class="header" href="#shield-setup">Shield Setup</a></h2>
<p><img src="img/Shield_setup-2.gif" alt="Shield Setup" /></p>
<hr />
<p><a name='faq'></a></p>
<h2 id="faq"><a class="header" href="#faq">FAQ</a></h2>
<h2 id="1how-do-i-know-a-field-in-an-object-is-encrypted-at-rest"><a class="header" href="#1how-do-i-know-a-field-in-an-object-is-encrypted-at-rest">1.How do I know a Field in an Object is encrypted at rest?</a></h2>
<p>Metadata API - <em><strong>describe</strong></em> - provides <strong>encrypted</strong> flag value for the encrypted fields as <strong>true</strong> as shown below:</p>
<h4 id="account-object-encrypted-fields"><a class="header" href="#account-object-encrypted-fields">Account object encrypted fields:</a></h4>
<p><img src="https://github.com/mohan-chinnappan-n/Shield-setup/raw/master/FAQ/img/account-encrypted-fields.png" alt="Account object encrypted fields:" /></p>
<h4 id="describe-on-account-object-showing-encrypted-flag-for-the--encrypted-fields"><a class="header" href="#describe-on-account-object-showing-encrypted-flag-for-the--encrypted-fields">Describe on Account Object showing <strong>encrypted flag</strong> for the  encrypted fields:</a></h4>
<p><img src="https://github.com/mohan-chinnappan-n/Shield-setup/raw/master/FAQ/img/describe-showing-encrypted-flag.png" alt="describe showing the encrypted flag" /></p>
<h4 id="describe-on-account-object"><a class="header" href="#describe-on-account-object">Describe on Account Object:</a></h4>
<p><img src="https://github.com/mohan-chinnappan-n/Shield-setup/raw/master/FAQ/img/account-describe-metadata.png" alt="describe showing the Account Object" /></p>
<h3 id="options-for-verifying-encryption"><a class="header" href="#options-for-verifying-encryption">Options for Verifying Encryption:</a></h3>
<ol>
<li>
<p>At the request of an organizations admin,  <em><strong>Tier 3 security agents</strong></em> can run a backend process to provide confirmation details of encrypted fields based on server logs which can be provided to users. Please allow two business days for these requests to process due to complexity of the request.</p>
</li>
<li>
<p>Organization admins can follow the steps below to use <strong>tenant key masking</strong> to verify field encryption at a record level:</p>
<p>a.     Export <strong>current tenant secret</strong> used to encrypt current data in report and store it in a safe place.</p>
<p>b.     Generate a <strong>new tenant secret</strong>.</p>
<p>c.     Destroy the initial key used to encrypt data.</p>
<p>d.     With the new key active navigate to any record where fields are encrypted and the data will show ????? meaning the data is encrypted.</p>
</li>
</ol>
<p>Note: Once the admin or customer has reviewed the data masked with ????, the old secret used to encrypt the data can be imported back into the org and the new key destroyed as it was not used to encrypt any data.</p>
<h4 id="how-about-attachments-encryption"><a class="header" href="#how-about-attachments-encryption">How about Attachments encryption?</a></h4>
<p>In the event that an admin would like to verify encryption on files and attachments the query below can be ran in Developer Console:</p>
<pre><code class="language-sql">    SELECT ContentType, Id, IsEncrypted FROM Attachments WHERE IsEncrypted = false/true
</code></pre>
<p>The query above will run against attachments and show all content where IsEncrypted = true or false. The attachments option can be replaced with files and content type removed to determine if files are encrypted or decrypted based on the IsEncrypted flag.</p>
<p>For additional information related to platform encryption masking please review our Salesforce article entitled:</p>
<p>What Does My Encrypted Data Look Like?:
https://help.salesforce.com/articleView?id=security_pe_masking.htm&amp;type=0</p>
<hr/>
<h2 id="knowledge-article-000247422-says-view-encrypted-data-permission-not-needed-with-shield-platform-encryption-beginning-spring-17"><a class="header" href="#knowledge-article-000247422-says-view-encrypted-data-permission-not-needed-with-shield-platform-encryption-beginning-spring-17">Knowledge Article: 000247422 says: View Encrypted Data Permission Not Needed with Shield Platform Encryption Beginning Spring ‘17</a></h2>
<h2 id="can-you-explain-this-with-an-example"><a class="header" href="#can-you-explain-this-with-an-example">Can you explain this with an example?</a></h2>
<p>![KB-FLS]https://github.com/mohan-chinnappan-n/Shield-setup/raw/master/FAQ/img/account-describe-metadata.png)
<a href="https://help.salesforce.com/articleView?id=000247422&amp;type=1">Reference to this Knowledge Article</a></p>
<p><img src="https://github.com/mohan-chinnappan-n/Shield-setup/raw/master/FAQ/img/win17-rel-notes-viewEncryptedData-perm-NN.png" alt="Winter17 release-notes" /></p>
<p><a href="https://releasenotes.docs.salesforce.com/en-us/winter17/release-notes/rn_security_pe_ved_decouple_announcement.htm">Reference: View Encrypted Data” Permission Not Needed with Shield Platform Encryption Beginning Spring ‘17</a></p>
<p>Let us take an example: In our org, we have an user: <strong>joe simple</strong></p>
<p><img src="https://github.com/mohan-chinnappan-n/Shield-setup/raw/master/FAQ/img/user-joe-simple.png" alt="user joe simple" /></p>
<p>Joe can see the <strong>encrypted</strong> field: <strong>Account.Fax</strong> but Joe <strong>can't</strong> see the <strong>encrypted</strong> field <strong>Account.Phone</strong> as per FLS for his profile:</p>
<h4 id="accountfax"><a class="header" href="#accountfax">Account.Fax:</a></h4>
<p><img src="https://github.com/mohan-chinnappan-n/Shield-setup/raw/master/FAQ/img/user-joesimple-can-seee-account_fax.png" alt="joe account.fax" /></p>
<h4 id="accountphone"><a class="header" href="#accountphone">Account.Phone:</a></h4>
<p><img src="https://github.com/mohan-chinnappan-n/Shield-setup/raw/master/FAQ/img/user-joesimple-cannot-see-account_phone.png" alt="joe account.phone" /></p>
<p>If Joe uses REST API for example, to access Account Object, Joe will be denied access to the field: <strong>Account.Phone</strong> as shown below, while Joe can access <strong>Account.Fax</strong></p>
<p><img src="https://github.com/mohan-chinnappan-n/Shield-setup/raw/master/FAQ/img/rest-api-user-cannot-access_account_phone.png" alt="joe cannot access account.phone" /></p>
<p>But other user, whose FLS allows <strong>read</strong> on these fields: <strong>Account.Fax</strong> and <strong>Account.Phone</strong> can access these two fields:</p>
<p><img src="https://github.com/mohan-chinnappan-n/Shield-setup/raw/master/FAQ/img/describe-showing-encrypted-flag.png" alt="describe showing the encrypted flag" /></p>
<hr/>
<ul>
<li><strong>Do I have to backup tenant secrets?</strong></li>
</ul>
<p>YES!!!</p>
<p>Tenant secrets are not like passwords.</p>
<p>Unlike passwords, you can’t reset a tenant secret. Salesforce can’t help with deleted, destroyed, or misplaced tenant secrets. Always back up tenant secrets!</p>
<hr/>
<ul>
<li><strong>Is the encrypted fields data encrypted at rest?</strong></li>
</ul>
<p>YES!</p>
<p>You should use field-level access controls to limit who can access this sensitive data as shown above in question number: 2</p>
<p>About guideline for selecting fields for encrypting?</p>
<p>Unnecessarily encrypting data can slow down performance and affect users day-to-day activities.  Based on your regulatory requirements define the kinds of customer data that require extra security and apply Shield Platform Encryption only to those areas.</p>
<ul>
<li><strong>About automatic encryption?</strong></li>
</ul>
<p>Field values are automatically encrypted only in records <strong>created or updated after you’ve enabled encryption</strong>. Salesforce recommends <strong>updating existing records</strong> to ensure that their field values are encrypted. For example, if you encrypt the Description field on the Case object, use the Data Loader to update all case records. Contact Salesforce if you need help with this.</p>
<p>Can you provide technical details about Platform Encryption?</p>
<ul>
<li><img src="https://github.com/mohan-chinnappan-n/Shield-setup/raw/master/FAQ/img/platform-en.png" alt="Platform Encryption Flow" /></li>
</ul>
<p>Here is the video answering this question.</p>
<iframe width="920" height="640" src="https://www.youtube.com/embed/RMUl0fF7x1E" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<ul>
<li><strong>About Sandbox Refresh: How Does Shield Platform Encryption Work In a Sandbox?</strong></li>
</ul>
<p>Refreshing a sandbox from a production organization creates an exact copy of the production organization. If Shield Platform Encryption is enabled on the production organization, all encryption settings are copied, including tenant secrets created in production.</p>
<p>Once a sandbox is refreshed, tenant secret changes are confined to your current organization. This means that when you rotate or destroy a tenant secret on sandbox, it doesn’t affect the production organization.</p>
<p>As a best practice, rotate tenant secrets on sandboxes after a refresh. Rotation ensures that production and sandbox use different tenant secrets. Destroying tenant secrets on a sandbox renders encrypted data unusable in cases of partial or full copies.</p>
<p><a href="https://help.salesforce.com/articleView?id=security_pe_sandboxes.htm&amp;type=5">How Does Shield Platform Encryption Work in a Sandbox?</a></p>
<h3 id="resources-for-curious-minds"><a class="header" href="#resources-for-curious-minds">Resources for curious minds:</a></h3>
<p><a href="https://help.salesforce.com/articleView?id=security_pe_rotate_keys.htm&amp;type=5">Rotate Your Encryption Tenant Secrets - based on your organization’s security policies</a></p>
<p><a href="https://help.salesforce.com/articleView?err=1&amp;id=security_pe_comparison_table.htm&amp;siteLang=en_US&amp;type=0">What’s the Difference Between Classic Encryption and Shield Platform Encryption?</a></p>
<p><a href="https://help.salesforce.com/articleView?id=security_pe_concepts.htm&amp;type=0&amp;language=en_US">How Shield Platform Encryption Works</a></p>
<p><a href="https://help.salesforce.com/articleView?err=1&amp;id=security_pe_considerations.htm&amp;siteLang=en_US&amp;type=0">Tradeoffs and Limitations of Shield Platform Encryption</a></p>
<p><a href="https://help.salesforce.com/articleView?err=1&amp;id=security_pe_enable_standard_fields.htm&amp;siteLang=en_US&amp;type=0&amp;language=en_US">Encrypt Fields</a></p>
<ul>
<li>
<p><a href="https://help.salesforce.com/articleView?id=000247422&amp;type=1">View Encrypted Data Permission Not Needed with Shield Platform Encryption Beginning Spring ‘17</a></p>
</li>
<li>
<p><a href="https://releasenotes.docs.salesforce.com/en-us/winter17/release-notes/rn_security_pe_ved_decouple_announcement.htm">View Encrypted Data” Permission Not Needed with Shield Platform Encryption Beginning Spring ‘17</a></p>
</li>
<li>
<p><a href="https://developer.salesforce.com/docs/atlas.en-us.securityImplGuide.meta/securityImplGuide/security_pe_best_practices.htm">Platform Encryption Best Practices</a></p>
</li>
<li>
<p><a href="https://resources.docs.salesforce.com/206/latest/en-us/sfdc/pdf/salesforce_platform_encryption_tipsheet.pdf">SALESFORCE PLATFORM ENCRYPTION</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=sZ9SvYIij4w">Tighten Your Security with Salesforce Shield Platform Encryption</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Probabilistic_encryption">Probabilistic encryption</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Deterministic_encryption">Deterministic encryption</a></p>
</li>
</ul>
<h2 id="references"><a class="header" href="#references">References</a></h2>
<ul>
<li><a href="https://help.salesforce.com/s/articleView?id=sf.security_pe_best_practices.htm&amp;type=5">Shield Platform Encryption Best Practices</a></li>
<li><a href="https://github.com/mohan-chinnappan-n/Shield-setup">Shield Setup</a></li>
<li><a href="https://help.salesforce.com/s/articleView?id=sf.security_pe_setup.htm&amp;type=5">Key Management and Rotation</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../security/rh.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../security/profile-ps.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../security/rh.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../security/profile-ps.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3000/__livereload");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../mermaid.min.js"></script>
        <script type="text/javascript" src="../mermaid-init.js"></script>


    </body>
</html>
